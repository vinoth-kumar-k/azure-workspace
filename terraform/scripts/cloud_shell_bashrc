# Custom Bashrc for Azure Cloud Shell

# Aliases
alias c='clear'
alias k='kubectl'
alias ll='ls -alF'
alias grep='grep --color=auto'
alias jq='jq'

# Functions
function kubectl-change-ns() {
  kubectl config set-context --current --namespace "$1"
}

# Alias for function (kset-ns)
# Note: Aliases cannot take arguments, but when an alias expands, arguments are appended.
# However, for clarity and strictness, we might prefer just using the function name or a simpler alias.
# User requested 'kset-ns' as alias for the functionality.
alias kset-ns='kubectl-change-ns'

# Helpful Tools Setup (e.g. yq)
# Check if yq is installed. If not, download it to $HOME/bin

if ! command -v yq &> /dev/null; then
    echo "yq not found. Installing..."
    mkdir -p "$HOME/bin"
    # Download yq (using generic linux amd64 build)
    # Using wget as it is standard in Cloud Shell
    wget https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64 -O "$HOME/bin/yq"
    chmod +x "$HOME/bin/yq"
    echo "yq installed to $HOME/bin/yq"
fi

# Ensure $HOME/bin is in PATH
if [[ ":$PATH:" != *":$HOME/bin:"* ]]; then
    export PATH="$HOME/bin:$PATH"
fi
